Metadata-Version: 2.4
Name: NovAST
Version: 0.1.0
Summary: NovAST is a deep learning framework for automated label transfer and novel cell type discovery in spatial transcriptomics.
Home-page: https://github.com/YMa-lab/NovAST
Author: Yu Zhu
Classifier: Programming Language :: Python :: 3.11
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: numpy>=1.26.4
Requires-Dist: pandas>=2.3.2
Requires-Dist: scanpy>=1.11.4
Requires-Dist: anndata>=0.12.2
Requires-Dist: scipy>=1.16.2
Requires-Dist: scikit-learn>=1.7.2
Requires-Dist: matplotlib>=3.10.6
Requires-Dist: seaborn>=0.13.2
Requires-Dist: PyYAML>=6.0.2
Requires-Dist: torch>=2.8.0
Dynamic: author
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-dist
Dynamic: summary

# NovAST: Novel cell type discovery and Annotation in Spatial Transcriptomics
This directory contains the source code for the following study: NovAST: A Deep Learning Framework for Automated Label Transfer and Novel Cell Type Discovery in Spatial Transcriptomics.

### Python Dependencies
The file named requirements.txt contains the required python pacakges.

### Web Application
The example code is prototyped and documented in the Jupyter Notebook.

## Installation Guide
Here is the sample command to install packages into a python environment:
```
# clone the code from GitHub
git clone https://github.com/YMa-lab/NovAST.git
# create a new environemnbt with python==3.11
python -m venv NovAST_env
# activate the python environemtn 
source NovAST_env/bin/activate
# install the package
pip install .
```

## Tutorial

## Demo
NovAST provides two operation modes:
- **Exploration mode** — recommended for applying NovAST on new datasets **without ground-truth labels** in the target dataset.
- **Evaluation mode** — reproduces the benchmarking pipeline used in the manuscript (requires ground-truth labels).

### Exploration Mode
### 1. Data Preparation
NovAST requires both **reference** and **target** datasets in **AnnData (.h5ad)** format. 

In this demo, we use the example datasets provided in the `demo_data/Xenium_IPF_lung_exploration` directory that comes with the package:

```python
train_path="VUHD116_Control.h5ad"
test_path="VUILD107_Disease.h5ad"
```

Since the target dataset does **not** contain ground-truth labels, set:

```python
training_mode = "exploration"
```

### 2. Required Arguments
The following parameters **must** be specified when running NovAST:

```python
# Column name in the reference AnnData that stores cell-type annotations
celltype_name_train = "final_lineage"

# Name of the output directory where results will be saved
name = "demo_exploration"

# A user-defined dataset identifier used for organizing output files
dataset = "Xenium_IPF_lung"
 
# Saving directory
savedir = "./"
```
All remaining hyperparameters are defined in the file **`default_config.yaml`**.  
Users may override any of them directly when calling `run_NovAST()` if customization is needed.

### 3. Run NovAST
You can now run NovAST using the specified settings as follows:

```python
args = run_NovAST(
    training_mode=training_mode,
    train_path=train_path,
    test_path=test_path,
    celltype_name_train=celltype_name_train,
    name=name,
    dataset=dataset,
    rounds=10
)
```
For each training round, the pipeline saves all outputs to the specified directory, with each random seed assigned its own subfolder. This includes the trained model, the Stage-1 loss values, and a final result file named **`adata_unlabeled_final.h5ad`**, which stores the latent embeddings in **`.obsm['X_latent']`** and the final predicted labels in **`.obs['voted_final_prediction']`**.

### 4. Visualize the output
Running the following line of code will generate a UMAP visualization of the results and save it inside each individual seed’s output directory:

```python
NovAST_plot(args)
```
